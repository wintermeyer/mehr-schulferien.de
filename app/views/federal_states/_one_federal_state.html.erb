<% cache([months, federal_state, religion, modus]) do %>
  <ol class="breadcrumb">
    <li><%= link_to "Startseite", root_path %></li>
    <li class="active"><%= federal_state.name %></li>
  </ol>

  <div class="page-header">
    <h1>
      <% if modus == 'invers' %>
      Invers-Ansicht
      <% end %>
      Schulferien <%= federal_state %>
      <% if religion %>
        <small><%= religion.name %></small>
      <% end %>
    </h1>
    <% if religions && religions.any? %>
      <p>
      <% if religion %>
        <%= link_to "Ohne Angabe", federal_state, class: "btn btn-sm btn-default" %>
      <% end %>
      <% religions.each do |religion| %>
        <% if year %>
          <% if religion == religion %>
            <%= link_to religion, federal_state_year_religion_path(federal_state, year, religion), class: "btn btn-sm btn-default", disabled: true %>
          <% else %>
            <%= link_to religion, federal_state_religion_path(federal_state, religion), class: "btn btn-sm btn-default" %>
          <% end %>
        <% else %>
          <% if religion == religion %>
            <%= link_to religion, federal_state_religion_path(federal_state, religion), class: "btn btn-sm btn-default", disabled: true %>
          <% else %>
            <%= link_to religion, federal_state_religion_path(federal_state, religion), class: "btn btn-sm btn-default" %>
          <% end %>
        <% end %>
      <% end %>
      </p>
    <% end %>
  </div>

  <div class="row">
    <div class="col-sm-6">
      <% if modus == 'invers' %>
        <p>
          Diese Seite zeigt alle <strong>Schultage mit der Farbe grün </strong>an. Zu diesen Terminen kann man normalerweise günstiger Urlaubsreisen buchen.
          <%= link_to "Zur Normal-Ansicht.", federal_state_path(federal_state) %>
        </p>
      <% else %>
        <p><strong>Alternative Ansicht:</strong>
          <%= link_to "Invers (zur optimalen Urlaubsplanung)", federal_state_filter_path(federal_state, Filter.find_by_name('Invers')) %>
      <% end %>
    </div>
    <div class="col-sm-6">
      <%= render partial: "shared/ad" rescue nil%>
    </div>
  </div>
<% end %>

<div class="row">
  <div class="col-md-12">
    <%= render partial: "shared/months_matrix", locals: {months: months, federal_state: federal_state, religion: religion, modus: modus} %>
  </div>
</div>
