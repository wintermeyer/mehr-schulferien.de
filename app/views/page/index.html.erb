<% content_for :meta_description do %>
Schulferien aller deutscher Bundesländer und bewegliche Ferientage der einzelnen Schulen.
<% end %>
<% content_for :html_title do %>
mehr-schulferien.de
<% end %>

<div class="row">
  <div class="col-sm-9">
    <p class="hidden-sm">
      Alphabetisch sortierte 3-Monats-Übersicht aller Bundesländern.
    </p>
    <p class="visible-sm">
      Alphabetisch sortierte 2-Monats-Übersicht aller Bundesländern.
    </p>
    <% cache ['quick_overview', @federal_states, @months] do %>
      <% @federal_states.each do |federal_state| %>
        <%= render partial: "shared/quick_overview_row", locals: {months: @months, federal_state: federal_state} %>
      <% end %>
    <% end %>
  </div>
  <div class="col-sm-3">
    <% if @last_federal_state || @last_school %>
      <% cache ['Spickzettel', @last_federal_state, @last_school] do %>
        <div class="panel panel-default visible-sm">
          <div class="panel-heading"><strong>Spickzettel</strong></div>
          <div class="panel-body">
            <div class="btn-group-vertical">
              <% if @last_federal_state %>
                <%= link_to @last_federal_state, class: 'btn btn-default' do %>
                  <%= truncate(@last_federal_state.to_s, length: 15) %>
                <% end %>
              <% end %>

              <% if @last_school %>
                <%= link_to city_school_path(@last_school.city, @last_school), class: 'btn btn-default' do %>
                  <%= truncate(@last_school.to_s, length: 15) %>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>

        <div class="panel panel-default visible-md">
          <div class="panel-heading"><strong>Spickzettel</strong></div>
          <div class="panel-body">
            <div class="btn-group-vertical">
              <% if @last_federal_state %>
                <%= link_to @last_federal_state, class: 'btn btn-default' do %>
                  <%= truncate(@last_federal_state.to_s, length: 20) %>
                <% end %>
              <% end %>

              <% if @last_school %>
                <%= link_to city_school_path(@last_school.city, @last_school), class: 'btn btn-default' do %>
                  <%= truncate(@last_school.to_s, length: 20) %>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>

        <div class="panel panel-default visible-lg">
          <div class="panel-heading"><strong>Spickzettel</strong></div>
          <div class="panel-body">
            <div class="btn-group-vertical">
              <% if @last_federal_state %>
                <%= link_to @last_federal_state, class: 'btn btn-default' do %>
                  <%= truncate(@last_federal_state.to_s, length: 30) %>
                <% end %>
              <% end %>

              <% if @last_school %>
                <%= link_to city_school_path(@last_school.city, @last_school), class: 'btn btn-default' do %>
                  <%= truncate(@last_school.to_s, length: 30) %>
                <% end %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>

    <% cache ['Crowdsourcing', City.count, School.count] do %>
      <div class="panel panel-default">
        <div class="panel-heading"><strong>Crowdsourcing</strong></div>
        <div class="panel-body">
          <p>In unserer Datenbank sind <%= number_with_precision(City.count, precision: 0, delimiter: '.') %> Städte mit insgesamt <%= number_with_precision(School.count, precision: 0, delimiter: '.') %> Schulen gespeichert. Diese Menge an Daten kann nur per Crowdsourcing (siehe <%= link_to 'Wikipedia-Eintrag', 'http://de.wikipedia.org/wiki/Crowdsourcing' %>) aktuell gehalten werden. Eine entsprechende Funktionalität ist in Entwicklung.</p>
        </div>
      </div>
    <% end %>

    <div class="panel panel-default">
      <div class="panel-heading"><strong>Über dieses Projekt</strong></div>
      <div class="panel-body">
        <p>
        Ich hoffe auch Ihnen mit dieser Webseite bei der Urlaubsplanung helfen zu können. Bitte schicken Sie mir eine <%= mail_to 'stefan.wintermeyer@amooma.de', 'E-Mail' %> oder einen Tweet mit Anregungen oder Kritik.
        </p>
  <a href="https://twitter.com/wintermeyer" class="twitter-follow-button" data-show-count="false" data-lang="de">@wintermeyer folgen</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      </div>
    </div>

    <%= render 'shared/roadmap' %>

    <% cache ['available_years_panel', available_years] do %>
      <% available_years.each do |year| %>
        <div class="panel panel-default">
          <div class="panel-heading"><strong>Schulferien <%= year %></strong></div>
          <div class="panel-body">
            <p>Bitte klicken Sie auf das gewünschte Bundesland:</p>
            <ul>
            <% @federal_states.each do |federal_state| %>
              <li><%= link_to federal_state, federal_state_year_path(federal_state, year) %></li>
            <% end %>
            </ul>
          </div>
        </div>
      <% end %>
    <% end %>

  </div>
</div>